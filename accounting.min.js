/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
!function(n,r){function e(n){return!!(""===n||n&&n.charCodeAt&&n.substr)}function t(n){return l?l(n):"[object Array]"===p.call(n)}function o(n){return n&&"[object Object]"===p.call(n)}function a(n,r){var e;n=n||{},r=r||{};for(e in r)r.hasOwnProperty(e)&&null==n[e]&&(n[e]=r[e]);return n}function u(n,r,e){var t,o,a=[];if(!n)return a;if(f&&n.map===f)return n.map(r,e);for(t=0,o=n.length;o>t;t++)a[t]=r.call(e,n[t],t,n);return a}function i(n,r){return n=Math.round(Math.abs(n)),isNaN(n)?r:n}function c(n){var r=s.settings.currency.format;return"function"==typeof n&&(n=n()),e(n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:n&&n.pos&&n.pos.match("%v")?n:e(r)?s.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}:r}var s={};s.version="0.4.2",s.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3,round:0},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var f=Array.prototype.map,l=Array.isArray,p=Object.prototype.toString,m=s.unformat=s.parse=function(n,r){if(t(n))return u(n,function(n){return m(n,r)});if(n=n||0,"number"==typeof n)return n;r=r||s.settings.number.decimal;var e=new RegExp("[^0-9-"+r+"]",["g"]),o=parseFloat((""+n).replace(/\((?=\d+)(.*)\)/,"-$1").replace(e,"").replace(r,"."));return isNaN(o)?0:o},d=s.toFixed=function(n,r,e){r=i(r,s.settings.number.precision);var t,o=Number(s.unformat(n)+"e"+r);t=e>0?Math.ceil:0>e?Math.floor:Math.round;var a=t(o),u=Number(a+"e-"+r).toFixed(r);return u},g=s.formatNumber=s.format=function(n,r,e,c){if(t(n))return u(n,function(n){return g(n,r,e,c)});n=m(n);var f=a(o(r)?r:{precision:r,thousand:e,decimal:c},s.settings.number),l=i(f.precision),p=0>n?"-":"",h=parseInt(d(Math.abs(n||0),l,f.round),10)+"",b=h.length>3?h.length%3:0;return p+(b?h.substr(0,b)+f.thousand:"")+h.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+f.thousand)+(l?f.decimal+d(Math.abs(n),l,f.round).split(".")[1]:"")},h=s.formatMoney=function(n,r,e,f,l,p){if(t(n))return u(n,function(n){return h(n,r,e,f,l,p)});n=m(n);var d=a(o(r)?r:{symbol:r,precision:e,thousand:f,decimal:l,format:p},s.settings.currency),b=c(d.format),y=n>0?b.pos:0>n?b.neg:b.zero;return y.replace("%s",d.symbol).replace("%v",g(Math.abs(n),i(d.precision),d.thousand,d.decimal))};s.formatColumn=function(n,r,f,l,p,d){if(!n||!t(n))return[];var h=a(o(r)?r:{symbol:r,precision:f,thousand:l,decimal:p,format:d},s.settings.currency),b=c(h.format),y=b.pos.indexOf("%s")<b.pos.indexOf("%v")?!0:!1,v=0,x=u(n,function(n,r){if(t(n))return s.formatColumn(n,h);n=m(n);var e=n>0?b.pos:0>n?b.neg:b.zero,o=e.replace("%s",h.symbol).replace("%v",g(Math.abs(n),i(h.precision),h.thousand,h.decimal));return o.length>v&&(v=o.length),o});return u(x,function(n,r){return e(n)&&n.length<v?y?n.replace(h.symbol,h.symbol+new Array(v-n.length+1).join(" ")):new Array(v-n.length+1).join(" ")+n:n})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.accounting=s):"function"==typeof define&&define.amd?define([],function(){return s}):(s.noConflict=function(e){return function(){return n.accounting=e,s.noConflict=r,s}}(n.accounting),n.accounting=s)}(this);
